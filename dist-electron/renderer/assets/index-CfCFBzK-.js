import{r as n,j as e,c as Ke,d as Ye}from"./react-vendor-BOFjqUEl.js";import{A as V,m as b}from"./framer-CfGr5RbN.js";import{_ as qe,$ as Ge,a0 as Je,a1 as Ae,a2 as Le,Y as Ze,a3 as me,a4 as Xe,a5 as Qe,a6 as et}from"./vendor-aEln8mvI.js";import{A as fe,C as tt,M as at,S as Pe,a as Re,E as ge,H as pe,b as Oe,c as rt,X as J,L as st,D as Me,d as it,U as nt,e as lt,f as ot,T as dt,g as ct,P as xt,B as mt,h as ne,i as ut,j as gt,k as Fe,l as le,I as oe,m as ye,F as he,n as de,o as ee,p as ht,q as ft,r as pt,s as yt,t as bt,u as De}from"./icons-BqBsTNDD.js";import{c as wt}from"./supabase-B0Zpoh4C.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(l){if(l.ep)return;l.ep=!0;const s=r(l);fetch(l.href,s)}})();const ve={firstRun:!0,theme:"system",loggedInBefore:!1,lastEmail:null,displayName:null,offlineSession:!1,updatedAt:new Date().toISOString()};function Ue(){return typeof window<"u"&&typeof window.api<"u"}async function G(){try{if(Ue()){const d=await window.api.readSave();return{...ve,...d||{}}}const t=localStorage.getItem("sparcclen_theme")||"system",a=localStorage.getItem("sparcclen_first_time"),r=localStorage.getItem("sparcclen_last_email"),i=localStorage.getItem("sparcclen_logged_in_before")==="true",l=localStorage.getItem("sparcclen_display_name"),s=localStorage.getItem("sparcclen_offline_session")==="true";return{firstRun:a===null,theme:t,loggedInBefore:i,lastEmail:r||null,displayName:l||null,offlineSession:s,updatedAt:new Date().toISOString()}}catch{return{...ve}}}async function z(t){try{if(Ue()){const i=await window.api.saveWrite(t);try{typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("save:updated",{detail:i}))}catch{}return i}t.theme&&localStorage.setItem("sparcclen_theme",t.theme),typeof t.firstRun=="boolean"&&localStorage.setItem("sparcclen_first_time",t.firstRun?"true":"false"),typeof t.loggedInBefore=="boolean"&&localStorage.setItem("sparcclen_logged_in_before",String(t.loggedInBefore)),t.lastEmail!==void 0&&(t.lastEmail?localStorage.setItem("sparcclen_last_email",t.lastEmail):localStorage.removeItem("sparcclen_last_email")),t.displayName!==void 0&&(t.displayName?localStorage.setItem("sparcclen_display_name",t.displayName):localStorage.removeItem("sparcclen_display_name")),t.offlineSession!==void 0&&(t.offlineSession?localStorage.setItem("sparcclen_offline_session",String(!!t.offlineSession)):localStorage.removeItem("sparcclen_offline_session"));const r={...await G(),...t,updatedAt:new Date().toISOString()};try{typeof window<"u"&&typeof CustomEvent<"u"&&window.dispatchEvent(new CustomEvent("save:updated",{detail:r}))}catch{}return r}catch{return await G()}}const je="sparcclen_theme",Ne="sparcclen_first_time";function vt(){const[t,a]=n.useState(()=>{try{const f=localStorage.getItem(je);return f&&["system","light","dark"].includes(f)?f:"system"}catch{return"system"}}),[r,i]=n.useState(()=>{try{return localStorage.getItem(Ne)===null}catch{return!0}}),[l,s]=n.useState(!1),[d,o]=n.useState("light"),[c,x]=n.useState(null),h=n.useRef(null),m=n.useRef(null),u=()=>t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t,y=u();n.useEffect(()=>{const f=document.documentElement;y==="dark"?f.classList.add("dark"):f.classList.remove("dark");try{localStorage.setItem(je,t)}catch(g){console.warn("Failed to save theme to localStorage:",g)}(async()=>{try{await z({theme:t})}catch{}})()},[t,y]),n.useEffect(()=>{if(t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)"),g=()=>{const k=document.documentElement;f.matches?k.classList.add("dark"):k.classList.remove("dark")};return f.addEventListener("change",g),()=>f.removeEventListener("change",g)}},[t]),n.useEffect(()=>()=>{h.current&&clearTimeout(h.current),m.current&&clearTimeout(m.current)},[]);const p=f=>{if(m.current&&clearTimeout(m.current),l){x(f);return}const g=u(),k=f==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":f;g!==k?(o(k),s(!0),x(null),m.current=setTimeout(()=>{a(f)},50),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{console.warn("Theme transition timeout - forcing completion"),s(!1)},750)):(a(f),x(null))},w=()=>{if(s(!1),h.current&&(clearTimeout(h.current),h.current=null),c){const f=c;x(null),setTimeout(()=>{p(f)},100)}},E=()=>{p(t==="system"?"light":t==="light"?"dark":"system")},S=()=>{try{localStorage.setItem(Ne,"false"),i(!1)}catch(f){console.warn("Failed to save first time flag to localStorage:",f),i(!1)}(async()=>{try{await z({firstRun:!1})}catch{}})()};return n.useEffect(()=>{(async()=>{try{const f=await G();f&&(f.theme&&f.theme!==t&&p(f.theme),i(!!f.firstRun))}catch{}})()},[]),{theme:t,resolvedTheme:y,setTheme:p,toggleTheme:E,isFirstTime:r,markFirstTimeComplete:S,isTransitioning:l,transitionTheme:d,handleTransitionComplete:w}}function jt({isTransitioning:t,newTheme:a,onTransitionComplete:r}){const[i,l]=n.useState(!1),[s,d]=n.useState(a);n.useEffect(()=>{t&&(l(!0),d(a))},[t,a]);const o=()=>{l(!1),r()},x={light:{from:"#ffffff",to:"#f8fafc",accent:"#3b82f6"},dark:{from:"#0f172a",to:"#1e293b",accent:"#60a5fa"}}[s];return e.jsx(V,{children:i&&e.jsxs(b.div,{className:"fixed inset-0 z-[9999] pointer-events-none overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:[.4,0,.2,1]},children:[e.jsx(b.div,{className:"absolute inset-0",style:{background:`linear-gradient(135deg, ${x.from} 0%, ${x.to} 100%)`},initial:{clipPath:"circle(0% at 50% 50%)"},animate:{clipPath:"circle(150% at 50% 50%)"},transition:{duration:.45,ease:[.4,0,.2,1]},onAnimationComplete:o}),e.jsx(b.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0,scale:0},animate:{opacity:.1,scale:1.5},exit:{opacity:0},transition:{duration:.35,ease:[.4,0,.2,1],delay:.1},children:e.jsx("div",{className:"w-96 h-96 rounded-full",style:{background:`radial-gradient(circle, ${x.accent}40 0%, transparent 70%)`}})}),e.jsx(b.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0,scale:.5,rotate:-180},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:.5,rotate:180},transition:{duration:.3,ease:[.4,0,.2,1],delay:.15},children:e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center backdrop-blur-sm",style:{backgroundColor:`${x.accent}20`},children:s==="dark"?e.jsx("svg",{className:"w-8 h-8",style:{color:x.accent},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):e.jsx("svg",{className:"w-8 h-8",style:{color:x.accent},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})})]})})}const We=n.createContext(void 0);function Nt({children:t}){const a=vt(),{isTransitioning:r,transitionTheme:i,handleTransitionComplete:l}=a;return e.jsxs(We.Provider,{value:a,children:[t,e.jsx(jt,{isTransitioning:r,newTheme:i,onTransitionComplete:l})]})}function se(){const t=n.useContext(We);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function kt(t,a=16){const i=t+"SparcclenAuth2024";let l=0;for(let d=0;d<i.length;d++){const o=i.charCodeAt(d);l=(l<<5)-l+o,l=l&l}return Math.abs(l).toString(16).padStart(8,"0").padEnd(a*2,"0").substring(0,a*2)}async function be(t,a){const r=a||kt(t),i=new TextEncoder,l=i.encode(t),s=i.encode(r),d=await crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),o=await crypto.subtle.deriveBits({name:"PBKDF2",salt:s,iterations:1e5,hash:"SHA-256"},d,256);return{hash:Array.from(new Uint8Array(o)).map(h=>h.toString(16).padStart(2,"0")).join(""),salt:r}}function j(...t){return qe(Ge(t))}function St(t,a){return t.length<=a?t:t.substring(0,a)+"..."}function Ct(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Et(t,a){let r;return(...i)=>{clearTimeout(r),r=setTimeout(()=>t(...i),a)}}function ze(){const[t,a]=n.useState(0),[r,i]=n.useState(0),[l,s]=n.useState(!1),[d,o]=n.useState(!1),[c,x]=n.useState(0),[h,m]=n.useState(0),u=n.useRef([]),y=n.useRef(null),p=n.useRef(null);n.useEffect(()=>()=>{y.current&&clearTimeout(y.current),p.current&&clearInterval(p.current)},[]);const w=()=>{const k=Date.now()-6e4;return u.current=u.current.filter(I=>I>k),u.current.length>=4};return{canSwitch:()=>{const g=Date.now();if(d){const k=Math.ceil((c-g)/1e3);return{allowed:!1,reason:`Cooldown: ${k}s remaining`,waitTime:k*1e3}}return g-r<1e3?{allowed:!1,reason:`Wait ${Math.ceil((1e3-(g-r))/100)/10}s between switches`,waitTime:1e3-(g-r)}:w()?{allowed:!1,reason:"Too many switches! Activating 60s cooldown"}:{allowed:!0}},recordSwitch:g=>{const k=Date.now();if(w()){o(!0);const I=k+6e4;x(I),m(60),g?.(60),p.current=setInterval(()=>{const U=Date.now(),P=Math.ceil((I-U)/1e3);m(P),P<=0&&p.current&&clearInterval(p.current)},1e3),y.current=setTimeout(()=>{o(!1),u.current=[],x(0),m(0),p.current&&clearInterval(p.current)},6e4);return}u.current.push(k),i(k),a(I=>I+1)},handleRateLimitViolation:()=>{const g=Date.now();g-r<1e3&&(s(!0),setTimeout(()=>{s(!1)},1e3-(g-r)))},isRateLimited:l,isCooldownActive:d,remainingCooldownTime:h,switchCount:t}}const _t=()=>e.jsxs("div",{className:"w-full h-full flex",children:[e.jsxs("div",{className:"w-1/2 bg-white p-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-gradient-to-br from-indigo-500 to-purple-600"}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded"})]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded"}),e.jsx("div",{className:"w-16 h-1.5 bg-gray-300 rounded"}),e.jsx("div",{className:"w-10 h-1.5 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-2 mt-1",children:[e.jsx("div",{className:"w-full h-1.5 bg-gray-200 rounded mb-1.5"}),e.jsx("div",{className:"w-3/4 h-1.5 bg-gray-200 rounded mb-1.5"}),e.jsx("div",{className:"w-5/6 h-1.5 bg-gray-200 rounded"})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"flex-1 h-6 bg-indigo-500 rounded"}),e.jsx("div",{className:"flex-1 h-6 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"w-1/2 bg-gray-950 p-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-gradient-to-br from-indigo-500 to-purple-600"}),e.jsx("div",{className:"flex-1 h-2 bg-gray-800 rounded"})]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("div",{className:"w-12 h-1.5 bg-gray-700 rounded"}),e.jsx("div",{className:"w-16 h-1.5 bg-gray-700 rounded"}),e.jsx("div",{className:"w-10 h-1.5 bg-gray-700 rounded"})]}),e.jsxs("div",{className:"flex-1 bg-gray-900 rounded-lg p-2 mt-1",children:[e.jsx("div",{className:"w-full h-1.5 bg-gray-800 rounded mb-1.5"}),e.jsx("div",{className:"w-3/4 h-1.5 bg-gray-800 rounded mb-1.5"}),e.jsx("div",{className:"w-5/6 h-1.5 bg-gray-800 rounded"})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"flex-1 h-6 bg-indigo-600 rounded"}),e.jsx("div",{className:"flex-1 h-6 bg-gray-800 rounded"})]})]})]}),Tt=()=>e.jsxs("div",{className:"w-full h-full bg-white p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"}),e.jsx("div",{className:"flex-1 h-2.5 bg-gray-200 rounded"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-14 h-2 bg-gray-300 rounded"}),e.jsx("div",{className:"w-20 h-2 bg-gray-300 rounded"}),e.jsx("div",{className:"w-12 h-2 bg-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-2 mb-2 shadow-sm",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-4/5 h-2 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-sm",children:[e.jsx("div",{className:"w-3/4 h-2 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 h-8 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-lg"}),e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg"})]})]}),It=()=>e.jsxs("div",{className:"w-full h-full bg-gray-950 p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"}),e.jsx("div",{className:"flex-1 h-2.5 bg-gray-800 rounded"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-900"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-14 h-2 bg-gray-700 rounded"}),e.jsx("div",{className:"w-20 h-2 bg-gray-700 rounded"}),e.jsx("div",{className:"w-12 h-2 bg-gray-700 rounded"})]}),e.jsxs("div",{className:"flex-1 bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-3",children:[e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 mb-2 border border-gray-800",children:[e.jsx("div",{className:"w-full h-2 bg-gray-800 rounded mb-2"}),e.jsx("div",{className:"w-4/5 h-2 bg-gray-800 rounded mb-2"}),e.jsx("div",{className:"w-full h-2 bg-gray-800 rounded"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 border border-gray-800",children:[e.jsx("div",{className:"w-3/4 h-2 bg-gray-800 rounded mb-2"}),e.jsx("div",{className:"w-full h-2 bg-gray-800 rounded"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 h-8 bg-gradient-to-r from-indigo-600 to-indigo-700 rounded-lg"}),e.jsx("div",{className:"w-8 h-8 bg-gray-900 rounded-lg"})]})]}),At=[{id:"light",name:"Light",description:"Clean and bright interface",preview:Tt},{id:"dark",name:"Dark",description:"Easy on the eyes",preview:It},{id:"system",name:"System",description:"Adapts to your OS",preview:_t}];function Lt({onThemeSelect:t,onConfirm:a,isVisible:r=!0}){const{theme:i}=se(),[l,s]=n.useState(i||"system"),[d,o]=n.useState(!1),[c,x]=n.useState(null),{canSwitch:h,recordSwitch:m,handleRateLimitViolation:u,isRateLimited:y,isCooldownActive:p,remainingCooldownTime:w}=ze();n.useEffect(()=>{s(i)},[i]);const E=f=>{const g=h();if(!g.allowed){x(g.reason||"Please wait"),u(),setTimeout(()=>{x(null)},g.reason?.includes("Cooldown")?3e3:2e3);return}s(f),m(k=>{x("Too many switches! 60s cooldown activated"),setTimeout(()=>x(null),3e3)}),t(f)},S=()=>{o(!0),setTimeout(()=>{a?.()},400)};return r?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-950",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-6 py-8",children:[e.jsx(V,{children:(c||p)&&e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:j("mb-6 mx-auto max-w-2xl rounded-xl border-2 px-6 py-4 flex items-center gap-3 shadow-lg",p?"bg-red-50 dark:bg-red-950/30 border-red-500 text-red-700 dark:text-red-300":"bg-orange-50 dark:bg-orange-950/30 border-orange-500 text-orange-700 dark:text-orange-300"),children:[e.jsx(fe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-semibold",children:c||`Cooldown: ${w}s remaining`})}),p&&e.jsxs("div",{className:"flex-shrink-0 font-bold text-xl",children:[w,"s"]})]})}),e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-3",children:"Choose your interface"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Select the appearance that works best for you"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:At.map((f,g)=>{const k=l===f.id,I=f.preview;return e.jsxs(b.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},onClick:()=>E(f.id),disabled:y||p,className:j("relative group overflow-hidden rounded-2xl transition-all duration-200","bg-gray-50 dark:bg-gray-900",(y||p)&&"opacity-50 cursor-not-allowed",k?"ring-2 ring-indigo-600 ring-offset-4 ring-offset-white dark:ring-offset-gray-950":!y&&!p&&"hover:ring-2 hover:ring-gray-300 dark:hover:ring-gray-700 hover:ring-offset-4 hover:ring-offset-white dark:hover:ring-offset-gray-950"),children:[e.jsxs("div",{className:"aspect-[4/3] overflow-hidden bg-gray-100 dark:bg-gray-800 relative rounded-t-2xl",children:[e.jsx(I,{}),e.jsxs(V,{children:[k&&!(y||p)&&e.jsx(b.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",duration:.5},className:"absolute inset-0 bg-indigo-600/10 backdrop-blur-[2px] flex items-center justify-center rounded-t-2xl",children:e.jsx(b.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},className:"w-16 h-16 rounded-full bg-indigo-600 flex items-center justify-center shadow-2xl ring-4 ring-white/50",children:e.jsx(tt,{className:"w-8 h-8 text-white",strokeWidth:3})})}),(y||p)&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-red-500/20 backdrop-blur-[2px] flex items-center justify-center rounded-t-2xl",children:e.jsxs(b.div,{animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},className:"w-20 h-20 rounded-full bg-red-600 flex flex-col items-center justify-center shadow-2xl ring-4 ring-white/50",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:w}),e.jsx("span",{className:"text-xs text-white/80",children:"sec"})]})})]})]}),e.jsxs("div",{className:"p-5 text-center bg-white dark:bg-gray-900",children:[e.jsx("h3",{className:j("text-lg font-semibold mb-1",k?"text-indigo-600 dark:text-indigo-400":"text-gray-900 dark:text-white"),children:f.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.description})]}),e.jsx("div",{className:j("absolute inset-0 bg-indigo-600/0 transition-colors pointer-events-none","group-hover:bg-indigo-600/[0.02]")})]},f.id)})}),e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center",children:e.jsx("button",{onClick:S,disabled:d,className:j("px-8 py-3.5 rounded-xl font-semibold text-base","bg-indigo-600 hover:bg-indigo-700 text-white","shadow-lg shadow-indigo-600/25 hover:shadow-xl hover:shadow-indigo-600/30","transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed"),children:d?"Applying...":"Continue"})})]})}):null}const Pt=[{icon:at,value:"system",label:"System"},{icon:Pe,value:"light",label:"Light"},{icon:Re,value:"dark",label:"Dark"}];function Rt(){const{theme:t,setTheme:a}=se(),[r,i]=n.useState(!1),[l,s]=n.useState(!1),[d,o]=n.useState(""),c=n.useRef(null),{canSwitch:x,recordSwitch:h,handleRateLimitViolation:m,isRateLimited:u,isCooldownActive:y,remainingCooldownTime:p}=ze();n.useEffect(()=>{i(!0)},[]),n.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]);const w=(S,f=2e3)=>{o(S),s(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{s(!1)},f)},E=S=>{const f=x();if(!f.allowed){w(f.reason||"Please wait",f.reason?.includes("Cooldown")?3e3:2e3),m();return}h(g=>{w("Too many switches! 60s cooldown activated",3e3)}),a(S)};return r?e.jsxs("div",{className:"flex items-center gap-2 relative",children:[y&&e.jsx(b.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-red-600 text-white text-xs font-bold rounded-md px-2 py-1 h-6 min-w-[1.5rem] flex items-center justify-center shadow-lg",children:p}),Pt.map(S=>e.jsx("button",{className:j("relative flex size-8 items-center justify-center rounded-md transition-all duration-200",u||y?"cursor-not-allowed text-red-500 dark:text-red-400":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",!(u||y)&&t===S.value?"text-indigo-600 dark:text-indigo-400 bg-gray-100 dark:bg-gray-800":!(u||y)&&"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",(u||y)&&"border-2 border-red-400 dark:border-red-600 bg-red-50/80 dark:bg-red-950/80",y&&"animate-pulse"),role:"radio","aria-checked":t===S.value,"aria-label":`Switch to ${S.label} theme`,onClick:()=>E(S.value),title:u||y?"Rate limited - slow down!":`Switch to ${S.label} theme`,disabled:u||y,style:{WebkitAppRegion:"no-drag"},children:e.jsx(S.icon,{className:j("size-3.5 relative z-10 transition-all duration-200",(u||y)&&"animate-pulse")})},S.value)),e.jsx(V,{children:l&&e.jsx(b.div,{initial:{opacity:0,scale:.8,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-10},transition:{type:"spring",damping:20,stiffness:300},className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 z-50",children:e.jsx("div",{className:j("px-3 py-2 rounded-lg text-xs font-medium shadow-lg whitespace-nowrap backdrop-blur-sm border",y?"bg-red-600/90 text-white border-red-500":"bg-orange-500/90 text-white border-orange-400"),children:e.jsxs("div",{className:"relative",children:[d,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:j("w-2 h-2 rotate-45 border-r border-b",y?"bg-red-600/90 border-red-500":"bg-orange-500/90 border-orange-400")})})]})})})})]}):e.jsx("div",{className:"flex h-8 w-24"})}function ke({resource:t,onOpen:a,onToggleFavorite:r,variant:i="medium"}){const l=t.url||"",s=t.colors&&t.colors.length>0,o=(()=>{switch(i){case"large":return{container:"h-full flex flex-col",image:"flex-[3] min-h-0",content:"p-3 flex-shrink-0",title:"text-lg font-bold",description:"text-sm",showDescription:!0,maxTags:3};case"small":return{container:"h-full flex flex-col",image:"flex-[2] min-h-0",content:"p-2 flex-shrink-0",title:"text-sm font-semibold",description:"text-xs",showDescription:!1,maxTags:1};default:return{container:"h-full flex flex-col",image:"flex-[3] min-h-0",content:"p-3 flex-shrink-0",title:"text-base font-semibold",description:"text-sm",showDescription:!0,maxTags:2}}})();return e.jsxs(b.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},className:j("bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer group",o.container),onClick:()=>a(t),children:[e.jsxs("div",{className:j("bg-gray-100 dark:bg-gray-800 relative overflow-hidden",o.image),children:[s?e.jsx("div",{className:"h-full flex",children:t.colors.slice(0,5).map((c,x)=>e.jsx("div",{className:"flex-1",style:{backgroundColor:c}},x))}):l?e.jsx("img",{src:l,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-600",children:e.jsx(ge,{className:"h-12 w-12"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),r(t.id)},className:j("absolute top-2 right-2 p-2 rounded-full backdrop-blur-sm transition-all opacity-0 group-hover:opacity-100",t.is_favorite?"bg-red-500 text-white":"bg-white/80 dark:bg-gray-800/80 text-gray-600 dark:text-gray-400 hover:bg-red-500 hover:text-white"),children:e.jsx(pe,{className:j("h-4 w-4",t.is_favorite&&"fill-current")})})]}),e.jsxs("div",{className:o.content,children:[e.jsx("h3",{className:j("text-gray-900 dark:text-white mb-1 line-clamp-1",o.title),children:t.title}),t.description&&o.showDescription&&e.jsx("p",{className:j("text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",o.description),children:St(t.description,i==="large"?150:80)}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags?.slice(0,o.maxTags).map(c=>e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-2 py-1 rounded",children:c.name},c.id)),(t.tags?.length||0)>o.maxTags&&e.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-2 py-1 rounded",children:["+",t.tags.length-o.maxTags]})]}),t.view_count>0&&i!=="small"&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-500",children:[e.jsx(Oe,{className:"h-3 w-3"}),e.jsx("span",{children:t.view_count})]})]})]})]})}const Ot=Ae("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=n.forwardRef(({className:t,variant:a,size:r,asChild:i=!1,...l},s)=>{const d=i?Je:"button";return e.jsx(d,{className:j(Ot({variant:a,size:r,className:t})),ref:s,...l})});D.displayName="Button";const $=n.forwardRef(({className:t,type:a,...r},i)=>e.jsx("input",{type:a,className:j("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...r}));$.displayName="Input";const Mt=Ae("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=n.forwardRef(({className:t,...a},r)=>e.jsx(Le,{ref:r,className:j(Mt(),t),...a}));B.displayName=Le.displayName;const Ft=n.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:j("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a}));Ft.displayName="Card";const Dt=n.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:j("flex flex-col space-y-1.5 p-6",t),...a}));Dt.displayName="CardHeader";const Ut=n.forwardRef(({className:t,...a},r)=>e.jsx("h3",{ref:r,className:j("text-2xl font-semibold leading-none tracking-tight",t),...a}));Ut.displayName="CardTitle";const Wt=n.forwardRef(({className:t,...a},r)=>e.jsx("p",{ref:r,className:j("text-sm text-muted-foreground",t),...a}));Wt.displayName="CardDescription";const zt=n.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:j("p-6 pt-0",t),...a}));zt.displayName="CardContent";const $t=n.forwardRef(({className:t,...a},r)=>e.jsx("div",{ref:r,className:j("flex items-center p-6 pt-0",t),...a}));$t.displayName="CardFooter";const $e=n.createContext(void 0),we=()=>{const t=n.useContext($e);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},Bt=({children:t,open:a,setOpen:r,animate:i=!0})=>{const[l,s]=n.useState(!1),d=a!==void 0?a:l,o=r!==void 0?r:s;return e.jsx($e.Provider,{value:{open:d,setOpen:o,animate:i},children:t})},Vt=({children:t,open:a,setOpen:r,animate:i})=>e.jsx(Bt,{open:a,setOpen:r,animate:i,children:t}),Ht=t=>e.jsxs(e.Fragment,{children:[e.jsx(Kt,{...t}),e.jsx(Yt,{...t})]}),Kt=({className:t,children:a,...r})=>{const{open:i,setOpen:l,animate:s}=we();return e.jsx(b.div,{className:j("h-full px-5 py-5 hidden md:flex md:flex-col bg-gray-900 dark:bg-gray-800 w-[360px] flex-shrink-0",t),animate:{width:s?i?"360px":"80px":"360px"},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),...r,children:a})},Yt=({className:t,children:a,...r})=>{const{open:i,setOpen:l}=we();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:j("h-12 px-4 py-4 flex flex-row md:hidden items-center justify-between bg-gray-900 dark:bg-gray-800 w-full"),...r,children:[e.jsx("div",{className:"flex justify-end z-20 w-full",children:e.jsx(rt,{className:"text-gray-200 dark:text-gray-300 cursor-pointer",onClick:()=>l(!i)})}),e.jsx(V,{children:i&&e.jsxs(b.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.3,ease:"easeInOut"},className:j("fixed h-full w-full inset-0 bg-gray-900 dark:bg-gray-800 p-10 z-[100] flex flex-col justify-between",t),children:[e.jsx("div",{className:"absolute right-10 top-10 z-50 text-gray-200 dark:text-gray-300 cursor-pointer",onClick:()=>l(!i),children:e.jsx(J,{})}),a]})})]})})},qt=({link:t,className:a,onClick:r,...i})=>{const{open:l,animate:s}=we();return e.jsxs("button",{onClick:r,className:j("flex items-center justify-start gap-3 group/sidebar py-3  transition-all duration-200 hover:scale-105 w-full text-left",a),...i,children:[e.jsx("div",{className:"flex-shrink-0",children:t.icon}),e.jsx(b.span,{animate:{opacity:s?l?1:0:1,width:s?l?"auto":0:"auto"},transition:{duration:.15,ease:"easeInOut"},className:"text-gray-200 dark:text-gray-300 text-lg font-medium group-hover/sidebar:translate-x-1 transition duration-150 whitespace-nowrap overflow-hidden min-w-22",children:t.label})]})};function Be({type:t="card",count:a=6}){const r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},i={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6,ease:[.42,0,.58,1]}}};return t==="sidebar"?e.jsx(b.div,{variants:r,initial:"hidden",animate:"visible",className:"h-full bg-gray-200 dark:bg-gray-800 rounded-lg"}):t==="header"?e.jsx(b.div,{variants:r,initial:"hidden",animate:"visible",className:"flex gap-4 p-6",children:Array.from({length:4}).map((l,s)=>e.jsx(b.div,{variants:i,className:"h-12 bg-gray-200 dark:bg-gray-800 rounded-lg flex-1"},s))}):t==="grid"?e.jsx(b.div,{variants:r,initial:"hidden",animate:"visible",className:"grid gap-4 p-6",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:Array.from({length:a}).map((l,s)=>e.jsx(b.div,{variants:i,className:"h-48 bg-gray-200 dark:bg-gray-800 rounded-lg"},s))}):e.jsx(b.div,{variants:r,initial:"hidden",animate:"visible",className:"grid gap-4 p-6",style:{gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))"},children:Array.from({length:a}).map((l,s)=>e.jsx(b.div,{variants:i,className:"h-64 bg-gray-200 dark:bg-gray-800 rounded-lg"},s))})}const ie=280,ue=16,Gt=200;function Jt({resources:t,onOpenResource:a,onToggleFavorite:r,isLoading:i=!1}){const[l,s]=n.useState(1),d=n.useCallback(()=>{const c=window.innerWidth,x=Math.max(1,Math.floor((c+ue)/(ie+ue)));s(x)},[]);n.useEffect(()=>(d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)),[d]);const o=t.length>Gt;return i?e.jsx(Be,{type:"grid",count:8}):t.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-2",children:"No resources found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm",children:"Try adjusting your search or filters"})]})}):o?e.jsx("div",{id:"resource-grid-container",className:"flex-1",style:{width:"100%",height:"100%"},children:e.jsx("div",{className:"grid p-6",style:{gridTemplateColumns:`repeat(${l}, ${ie}px)`,gridAutoRows:"minmax(320px, auto)",gap:ue,justifyContent:"center"},children:t.map(c=>e.jsx("div",{style:{width:ie},children:e.jsx(ke,{resource:c,onOpen:a,onToggleFavorite:r})},c.id))})}):e.jsx(b.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.04}}},className:"grid gap-4 p-6",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${ie}px, 1fr))`,gridAutoRows:"minmax(320px, auto)"},children:t.map(c=>e.jsx(ke,{resource:c,onOpen:a,onToggleFavorite:r},c.id))})}const Zt={VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxka2x2b3RxbnZwbHVobXNoZmptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MDY5OTMsImV4cCI6MjA3NTE4Mjk5M30.QcruOS5GH-_S4YUqRIHpoHdtq8bcm4NcYv1VMM6-VAU",VITE_SUPABASE_URL:"https://ldklvotqnvpluhmshfjm.supabase.co"};var Xt={};const Ve=typeof Ze<"u"?Xt:void 0,re=typeof import.meta<"u"?Zt:{},Se=Ve?.SUPABASE_URL||re.VITE_SUPABASE_URL||re.SUPABASE_URL||"",Ce=Ve?.SUPABASE_KEY||re.VITE_SUPABASE_ANON_KEY||re.VITE_SUPABASE_KEY||re.SUPABASE_KEY||"";function Qt(){const t={getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:a=>({data:{subscription:{unsubscribe:()=>{}}}}),signOut:async()=>({error:null}),getUser:async()=>({data:{user:null},error:null})};return console.warn("[supabase] Missing configuration. Using mock auth client for development."),{auth:t}}const M=Se&&Ce?wt(Se,Ce,{auth:{persistSession:!0,autoRefreshToken:!0}}):Qt(),He=n.createContext(void 0);function ea({children:t}){const[a,r]=n.useState(null),[i,l]=n.useState(!0);n.useEffect(()=>{(async()=>{const{data:{session:c}}=await M.auth.getSession();if(r(c?.user??null),c?.user?.email)try{const x=c.user,h=x?.user_metadata||x?.raw_user_meta_data||{},m=h.display_name||h.full_name||h.name||(c.user.email?.split("@")[0]??null);await z({loggedInBefore:!0,lastEmail:c.user.email,displayName:m??null})}catch{}l(!1)})();const{data:{subscription:o}}=M.auth.onAuthStateChange(async(c,x)=>{if(r(x?.user??null),x?.user?.email)try{const h=x.user,m=h?.user_metadata||h?.raw_user_meta_data||{},u=m.display_name||m.full_name||m.name||(x.user.email?.split("@")[0]??null);await z({loggedInBefore:!0,lastEmail:x.user.email,displayName:u??null})}catch{}l(!1)});return()=>{o.unsubscribe()}},[M.auth]);const s=async()=>{try{await M.auth.signOut()}catch(d){console.warn("Sign out API call failed, clearing local session:",d)}r(null);try{await z({offlineSession:!1})}catch{}};return e.jsx(He.Provider,{value:{user:a,loading:i,signOut:s},children:t})}function ce(){const t=n.useContext(He);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function ta({onSelectCategory:t,onOpenSettings:a,onOpenProfile:r}){const[i,l]=n.useState(!1),{user:s,signOut:d}=ce(),[o,c]=n.useState(typeof navigator<"u"?navigator.onLine:!0),[x,h]=n.useState(null);n.useEffect(()=>{const w=()=>c(navigator.onLine);window.addEventListener("online",w),window.addEventListener("offline",w),c(navigator.onLine),(async()=>{try{h(await G())}catch{}})();const E=S=>{try{S?.detail&&h(S.detail)}catch{}};return window.addEventListener("save:updated",E),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",w),window.removeEventListener("save:updated",E)}},[]);const m=!o&&!!x?.offlineSession,u=x?.displayName&&x.displayName.trim()||"offline user",y=w=>{w==="Dashboard"?t(""):w==="Profile"?r():w==="Settings"&&a()},p=[{label:"Dashboard",href:"/shell",icon:e.jsx(it,{className:"h-7 w-7 text-gray-300"})},{label:"Profile",href:"/profile",icon:e.jsx(nt,{className:"h-7 w-7 text-gray-300"})},{label:"Settings",href:"/settings",icon:e.jsx(lt,{className:"h-7 w-7 text-gray-300"})}];return e.jsx(Vt,{open:i,setOpen:l,children:e.jsxs(Ht,{className:"justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 px-1 overflow-y-auto overflow-x-hidden",children:[e.jsx(aa,{open:i}),e.jsx("div",{className:"mt-8 flex flex-col gap-0.5",children:p.map(w=>e.jsx(qt,{link:w,onClick:()=>y(w.label)},w.label))})]}),(s||m)&&e.jsxs("div",{className:"flex items-center justify-between gap-3 py-2 px-4 -mx-3 rounded-full bg-gray-800 dark:bg-gray-700 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:s?.email?.charAt(0).toUpperCase()||u.charAt(0).toUpperCase()})}),e.jsxs(b.div,{animate:{opacity:i?1:0,width:i?"auto":0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col overflow-hidden whitespace-nowrap min-w-0",children:[e.jsx("span",{className:"text-white text-sm font-medium truncate",children:s?s.user_metadata?.display_name||s.email?.split("@")[0]||"User":u}),e.jsx("span",{className:"text-gray-400 text-xs truncate",children:s?s.email:"Email unavailable in offline mode"})]})]}),e.jsx(b.div,{animate:{opacity:i?1:0,width:i?"auto":0},transition:{duration:.15,ease:"easeInOut"},className:"overflow-hidden",children:e.jsx("button",{onClick:()=>d(),className:"p-1 rounded hover:bg-gray-700 transition-colors flex-shrink-0",title:"Logout",children:e.jsx(st,{className:"h-4 w-4 text-gray-400 hover:text-white"})})})]})]})})}const aa=({open:t})=>e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Me,{className:"h-5 w-5 text-white"})}),e.jsxs(b.div,{animate:{opacity:t?1:0,width:t?"auto":0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col overflow-hidden whitespace-nowrap",children:[e.jsx("span",{className:"font-bold text-white text-lg",children:"Sparcclen"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Initiate the impossible"})]})]});function ra({resource:t,onClose:a,onToggleFavorite:r,onOpenExternal:i}){if(n.useEffect(()=>{const d=o=>{o.key==="Escape"&&a()};return t&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[t,a]),!t)return null;const l=t.url||"",s=t.colors&&t.colors.length>0;return e.jsx(V,{children:e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:a,children:e.jsxs(b.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[e.jsxs("div",{className:"relative",children:[s?e.jsx("div",{className:"h-64 flex",children:t.colors.map((d,o)=>e.jsx("div",{className:"flex-1 relative group",style:{backgroundColor:d},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/20",children:e.jsx("span",{className:"text-white font-mono text-sm font-semibold bg-black/40 px-3 py-1 rounded",children:d})})},o))}):l?e.jsx("img",{src:l,alt:t.title,className:"w-full h-64 object-cover"}):e.jsx("div",{className:"h-64 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsx(ge,{className:"h-16 w-16 text-gray-400 dark:text-gray-600"})}),e.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm text-gray-900 dark:text-white hover:bg-white dark:hover:bg-gray-800 transition-colors","aria-label":"Close modal",children:e.jsx(J,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsx("h2",{id:"modal-title",className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.title}),e.jsx("button",{onClick:d=>{d.stopPropagation(),r(t.id)},className:j("p-2 rounded-lg transition-colors flex-shrink-0",t.is_favorite?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-600 dark:hover:text-red-400"),"aria-label":t.is_favorite?"Remove from favorites":"Add to favorites",children:e.jsx(pe,{className:j("h-5 w-5",t.is_favorite&&"fill-current")})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsx("span",{children:Ct(t.date_added)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.view_count," views"]})]}),t.resource_type&&e.jsx("span",{className:"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 px-3 py-1 rounded-full",children:t.resource_type})]}),t.description&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:t.description})]}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Tags"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(d=>e.jsx("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-lg text-sm",children:d.name},d.id))})]}),t.url&&e.jsxs("button",{onClick:()=>i(t.url),className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Open Resource"}),e.jsx(ge,{className:"h-5 w-5"})]})]})]})})})}function sa({categories:t,activeCategory:a,activeSubcategory:r,onSelectCategory:i,onClearFilter:l}){const s=t.find(o=>o.id===a),d=s?.subcategories?.find(o=>o.id===r);return e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a&&e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?.title}),e.jsx("span",{className:"text-sm text-gray-400",children:"/"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d?.title})]}):e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s?.title}),e.jsx("button",{onClick:l,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(J,{className:"h-4 w-4 text-gray-500"})})]}),!a&&e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.map(o=>e.jsxs("button",{onClick:()=>i(o.id),className:j("px-3 py-1.5 rounded-full text-sm font-medium transition-colors","bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300","hover:bg-gray-200 dark:hover:bg-gray-700","border border-gray-200 dark:border-gray-700"),children:[o.title,o.item_count>0&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500 dark:text-gray-400",children:["(",o.item_count,")"]})]},o.id))}),a&&s?.subcategories&&s.subcategories.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>i(a),className:j("px-3 py-1.5 rounded-full text-sm font-medium transition-colors",r?"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700":"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300"),children:["All ",s.title]}),s.subcategories.map(o=>e.jsxs("button",{onClick:()=>i(a,o.id),className:j("px-3 py-1.5 rounded-full text-sm font-medium transition-colors",r===o.id?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[o.title,o.item_count>0&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500 dark:text-gray-400",children:["(",o.item_count,")"]})]},o.id))]})]})}function ia({searchQuery:t,onSearchChange:a,onToggleFavoritesView:r,favoritesOnly:i,categories:l,activeCategory:s,activeSubcategory:d,onSelectCategory:o,onClearCategoryFilter:c}){return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto px-6 mb-6",children:[e.jsxs("div",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border border-gray-200 dark:border-gray-800 rounded-full px-6 py-3 shadow-lg flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:x=>a(x.target.value),placeholder:"Search resources... (Ctrl+K)",className:"w-full pl-10 pr-4 py-2 rounded-full bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none transition-all"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:r,className:j("p-2 rounded-full transition-colors",i?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"),title:"Toggle favorites (Ctrl+F)",children:e.jsx(pe,{className:j("h-5 w-5",i&&"fill-current")})})})]}),e.jsx(sa,{categories:l,activeCategory:s,activeSubcategory:d,onSelectCategory:o,onClearFilter:c})]})})}function na(){const{user:t}=ce(),[a,r]=n.useState(!1),[i,l]=n.useState("User"),[s,d]=n.useState(null),[o,c]=n.useState(null),[x,h]=n.useState(typeof navigator<"u"?navigator.onLine:!0);n.useEffect(()=>{const u=()=>h(navigator.onLine);window.addEventListener("online",u),window.addEventListener("offline",u),h(navigator.onLine),(async()=>{try{const p=await G();c(p)}catch{}})();const y=p=>{try{p?.detail&&c(p.detail)}catch{}};return window.addEventListener("save:updated",y),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",u),window.removeEventListener("save:updated",y)}},[]),n.useEffect(()=>{if(t){const y=t.user_metadata?.display_name||t.email?.split("@")[0]||"User";l(y),d(t.email??null);return}if(!x&&!!o?.offlineSession){const y=o?.displayName&&o.displayName.trim()||"offline user";l(y),d(o?.lastEmail||null)}},[t,o,x]);const m=()=>{r(!1)};return e.jsxs("div",{className:"h-full bg-gray-50 dark:bg-gray-950 flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your account information and preferences"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-8",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:s?.charAt(0).toUpperCase()||i.charAt(0).toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:i}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s??(o?.offlineSession?"Email unavailable in offline mode":"")})]}),e.jsx("button",{onClick:()=>r(!a),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:a?"Cancel":"Edit Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),a?e.jsx("input",{type:"text",value:i,onChange:u=>l(u.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900 dark:text-white",children:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s??(o?.offlineSession?"Email unavailable in offline mode":"Unknown")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t?.created_at?new Date(t.created_at).toLocaleDateString():o?.offlineSession?"Since the dawn of Offline":"Unknown"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Account Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t?"Free User":o?.offlineSession?"Mysterious Offline Entity":"Guest"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resources Saved"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t?"0":o?.offlineSession?"Countless (in your imagination)":"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Active"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t?"Just now":o?.offlineSession?"Right this offline moment":"Unknown"})]})]})]}),a&&e.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:m,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Changes"}),e.jsx("button",{onClick:()=>r(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})})})]})}function la(){const{theme:t,toggleTheme:a}=se(),[r,i]=n.useState({email:!0,push:!1,updates:!0}),[l,s]=n.useState({profile:"public",data:"private"}),d=(c,x)=>{i(h=>({...h,[c]:x}))},o=(c,x)=>{s(h=>({...h,[c]:x}))};return e.jsxs("div",{className:"h-full bg-gray-50 dark:bg-gray-950 flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your preferences and account settings"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(xt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Appearance"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Theme"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Choose your preferred theme"})]}),e.jsx("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:t==="light"?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Light"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Dark"})]})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(mt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notifications"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive updates via email"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.email,onChange:c=>d("email",c.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receive browser notifications"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.push,onChange:c=>d("push",c.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Update Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get notified about new features"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.updates,onChange:c=>d("updates",c.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ne,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Privacy"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Profile Visibility"}),e.jsxs("select",{value:l.profile,onChange:c=>o("profile",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Data Sharing"}),e.jsxs("select",{value:l.data,onChange:c=>o("data",c.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"anonymous",children:"Anonymous"}),e.jsx("option",{value:"public",children:"Public"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Data Management"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Export Data"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Download your data"})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Export"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Clear Cache"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clear local storage data (frees up ~5-10MB)"})]}),e.jsx("button",{onClick:()=>localStorage.clear(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Clear"})]})]})]})]})})})]})}function oa(t){n.useEffect(()=>{const a=r=>{for(const i of t){const l=(i.ctrlKey||i.metaKey)&&(r.ctrlKey||r.metaKey),s=i.shiftKey===void 0||i.shiftKey===r.shiftKey,d=i.altKey===void 0||i.altKey===r.altKey;if(r.key.toLowerCase()===i.key.toLowerCase()&&(i.ctrlKey||i.metaKey?l:!r.ctrlKey&&!r.metaKey)&&s&&d){r.preventDefault(),i.handler();break}}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t])}class da{categories=[];resources=[];constructor(){this.init()}genId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const r=Math.random()*16|0;return(a==="x"?r:r&3|8).toString(16)})}now(){return new Date().toISOString()}slugify(a){return a.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")}init(){const a=this.now(),r=a,i=this.genId(),l=this.genId(),s=this.genId(),d=this.genId(),o={id:i,slug:this.slugify("Colors"),title:"Colors",description:"Color resources",parent_id:null,sort_order:0,item_count:0,created_at:a,updated_at:r,subcategories:[{id:s,slug:this.slugify("2-Color Combo"),title:"2-Color Combo",description:"Two color combinations",parent_id:i,sort_order:0,item_count:0,created_at:a,updated_at:r}]},c={id:l,slug:this.slugify("Fonts"),title:"Fonts",description:"Font resources",parent_id:null,sort_order:1,item_count:0,created_at:a,updated_at:r,subcategories:[{id:d,slug:this.slugify("Display"),title:"Display",description:"Display fonts",parent_id:l,sort_order:0,item_count:0,created_at:a,updated_at:r}]};this.categories=[o,c];const x=(m,u,y,p,w,E)=>{const S=this.genId(),f=this.slugify(m);return{id:S,slug:f,title:m,description:null,url:E||null,category_id:u,subcategory_id:y,resource_type:w,thumbnail_url:null,thumbnail_type:null,colors:null,metadata:{},view_count:0,date_added:a,created_at:a,updated_at:r,tags:p.map(g=>({id:this.genId(),name:g,slug:this.slugify(g),usage_count:0,created_at:a})),is_favorite:!1}};this.resources=[x("Blue/Orange Combo",i,s,["colors","combo"],"color"),x("High-Contrast Display Font",l,d,["fonts","display"],"font")];const h={};this.resources.forEach(m=>{h[m.category_id]=(h[m.category_id]||0)+1,m.subcategory_id&&(h[m.subcategory_id]=(h[m.subcategory_id]||0)+1)}),this.categories=this.categories.map(m=>({...m,item_count:h[m.id]||0,subcategories:m.subcategories?.map(u=>({...u,item_count:h[u.id]||0}))||[]}))}getFavoritesSet(a){if(!a||typeof window>"u")return new Set;try{const r=window.localStorage.getItem(`favorites:${a}`);if(!r)return new Set;const i=JSON.parse(r);return new Set(i)}catch{return new Set}}saveFavoritesSet(a,r){if(typeof window>"u")return;const i=Array.from(r);window.localStorage.setItem(`favorites:${a}`,JSON.stringify(i))}}const F=new da;async function ca(){return[...F.categories]}async function xa(t,a){let r=[...F.resources];return a?r=r.filter(i=>i.subcategory_id===a):t&&(r=r.filter(i=>i.category_id===t)),r.map(i=>({...i}))}async function ma(t,a){const r=F.getFavoritesSet(a);let i=[...F.resources];if(t.categoryId&&(i=i.filter(s=>s.category_id===t.categoryId)),t.subcategoryId&&(i=i.filter(s=>s.subcategory_id===t.subcategoryId)),t.query){const s=t.query.toLowerCase();i=i.filter(d=>d.title.toLowerCase().includes(s)||(d.description||"").toLowerCase().includes(s)||(d.url||"").toLowerCase().includes(s))}t.tags.length>0&&(i=i.filter(s=>t.tags.some(d=>(s.tags||[]).some(o=>o.id===d||o.slug===d))));let l=i.map(s=>({...s,is_favorite:r.has(s.id)}));return t.favoritesOnly&&(l=l.filter(s=>s.is_favorite)),l}async function ua(t){const a=F.resources.findIndex(r=>r.id===t);a>=0&&(F.resources[a]={...F.resources[a],view_count:(F.resources[a].view_count||0)+1})}async function ga(t,a){const r=F.getFavoritesSet(a);return r.has(t)?(r.delete(t),F.saveFavoritesSet(a,r),{favorite:!1}):(r.add(t),F.saveFavoritesSet(a,r),{favorite:!0})}function ha(){const{theme:t,toggleTheme:a}=se(),{user:r}=ce(),[i,l]=n.useState([]),[s,d]=n.useState([]),[o,c]=n.useState(null),[x,h]=n.useState(null),[m,u]=n.useState(""),[y,p]=n.useState(!1),[w,E]=n.useState(null),[S,f]=n.useState(!1),[g,k]=n.useState(!0),[I,U]=n.useState(!1),[P,W]=n.useState(!1);n.useEffect(()=>{H()},[]),n.useEffect(()=>{T()},[o,x,m,y]);const H=async()=>{try{k(!0);const v=await ca();l(v)}catch(v){console.error("Failed to load categories:",v)}finally{k(!1)}},T=async()=>{f(!0);try{let v;m||y?v=await ma({query:m,categoryId:o,subcategoryId:x,tags:[],favoritesOnly:y,resourceType:null},r?.id):v=await xa(o||void 0,x||void 0),d(v)}catch(v){console.error("Failed to load resources:",v)}finally{f(!1)}},Z=n.useCallback(Et(v=>{u(v)},250),[]),ae=v=>{Z(v)},q=(v,L)=>{c(v),h(L||null),u(""),p(!1),W(!1),U(!1)},K=async v=>{if(r)try{const L=await ga(v,r.id);d(R=>R.map(xe=>xe.id===v?{...xe,is_favorite:L.favorite}:xe)),w?.id===v&&E(R=>R?{...R,is_favorite:L.favorite}:null)}catch(L){console.error("Failed to toggle favorite:",L)}},X=async v=>{if(E(v),r)try{await ua(v.id),d(L=>L.map(R=>R.id===v.id?{...R,view_count:R.view_count+1}:R))}catch(L){console.error("Failed to increment view count:",L)}},A=v=>{window.open(v,"_blank","noopener,noreferrer")},N=()=>{U(!0),W(!1)},C=()=>{W(!0),U(!1)},_=()=>{p(v=>!v)};return oa([{key:"k",ctrlKey:!0,handler:()=>{document.querySelector('input[type="text"]')?.focus()},description:"Focus search"},{key:"f",ctrlKey:!0,handler:_,description:"Toggle favorites"},{key:"Escape",handler:()=>{w&&E(null)},description:"Close modal"}]),e.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden bg-gray-900 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[g?e.jsx("div",{className:"w-[360px] flex-shrink-0",children:e.jsx(Be,{type:"sidebar"})}):e.jsx(ta,{onSelectCategory:q,onOpenSettings:N,onOpenProfile:C}),e.jsxs("main",{className:"flex-1 overflow-hidden flex flex-col bg-gray-50 dark:bg-gray-950 rounded-l-3xl rounded-r-2xl relative z-10 shadow-xl my-2 mr-2.5",children:[!I&&!P&&e.jsx("div",{className:"pt-4",children:e.jsx(ia,{searchQuery:m,onSearchChange:ae,onToggleFavoritesView:_,favoritesOnly:y,categories:i,activeCategory:o,activeSubcategory:x,onSelectCategory:q,onClearCategoryFilter:()=>{c(null),h(null)}})}),P?e.jsx(na,{}):I?e.jsx(la,{}):e.jsx(Jt,{resources:s,onOpenResource:X,onToggleFavorite:K,isLoading:S})," "]})]}),e.jsx(ra,{resource:w,onClose:()=>E(null),onToggleFavorite:K,onOpenExternal:A})]})}function Q({className:t,isMaximized:a,onMaximizeToggle:r}){const[i,l]=n.useState(typeof navigator<"u"?navigator.onLine:!0);n.useEffect(()=>{const c=()=>l(navigator.onLine);return window.addEventListener("online",c),window.addEventListener("offline",c),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",c)}},[]);const s=()=>{try{window.api?.minimize()}catch(c){console.error("Failed to minimize window:",c)}},d=()=>{try{window.api?.maximize(),r?.()}catch(c){console.error("Failed to maximize window:",c)}},o=()=>{try{window.api?.close()}catch(c){console.error("Failed to close window:",c)}};return e.jsxs("div",{className:`flex items-center bg-transparent border-transparent space-x-2 ${t}`,children:[e.jsx("div",{className:"flex items-center pr-1",style:{WebkitAppRegion:"no-drag"},children:e.jsx("span",{title:i?"Online":"Offline",className:`inline-block w-2.5 h-2.5 rounded-full mr-1 ${i?"bg-emerald-500":"bg-red-500"}`})}),e.jsx("div",{style:{WebkitAppRegion:"no-drag"},children:e.jsx(Rt,{})}),e.jsx("button",{onClick:s,className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 hover:scale-105",style:{WebkitAppRegion:"no-drag"},children:e.jsx(ut,{className:"w-4 h-4 text-gray-700 dark:text-gray-200"})}),e.jsx("button",{onClick:d,className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-all duration-200 hover:scale-105",style:{WebkitAppRegion:"no-drag"},children:e.jsx(gt,{className:"w-4 h-4 text-gray-700 dark:text-gray-200"})}),e.jsx("button",{onClick:o,className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-red-500 transition-all duration-200 hover:scale-105 group",style:{WebkitAppRegion:"no-drag"},children:e.jsx(J,{className:"w-4 h-4 text-gray-700 dark:text-gray-200 group-hover:text-white transition-colors"})})]})}function Ee({onLoaded:t,brandName:a="Sparcclen",tagline:r="Initiate the impossible",minimumDisplayTime:i=2e3}){const[l,s]=n.useState(!1);return n.useEffect(()=>{const d=setTimeout(()=>{s(!0)},i);return()=>clearTimeout(d)},[i]),n.useEffect(()=>{if(l){const d=setTimeout(t,400);return()=>clearTimeout(d)}},[l,t]),e.jsx(b.div,{initial:{opacity:1},animate:{opacity:l?0:1},transition:{duration:.4},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 dark:from-gray-900 dark:via-gray-950 dark:to-sky-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b.div,{animate:{scale:[.9,1.05,1]},transition:{duration:.5,repeat:1/0,repeatDelay:.5},className:"mb-6 flex justify-center",children:e.jsx(Me,{className:"h-20 w-20 text-primary-500",strokeWidth:1.5})}),e.jsx(b.h1,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:a}),r&&e.jsx(b.p,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:r}),e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex justify-center gap-2",children:[e.jsx(b.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:0},className:"h-2 w-2 rounded-full bg-primary-500"}),e.jsx(b.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2},className:"h-2 w-2 rounded-full bg-primary-500"}),e.jsx(b.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.4},className:"h-2 w-2 rounded-full bg-primary-500"})]})]})})}const fa={default:"bg-card border-border text-foreground",success:"bg-card border-green-600/50",error:"bg-card border-destructive/50",warning:"bg-card border-amber-600/50"},_e={default:"text-foreground",success:"text-green-600 dark:text-green-400",error:"text-destructive",warning:"text-amber-600 dark:text-amber-400"},pa={default:"text-muted-foreground",success:"text-green-600 dark:text-green-400",error:"text-destructive",warning:"text-amber-600 dark:text-amber-400"},ya={default:oe,success:le,error:fe,warning:Fe},ba={initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.95}};function O({title:t,message:a,variant:r="default",duration:i=4e3,position:l="bottom-right",actions:s,onDismiss:d,highlightTitle:o}){const c=ya[r];return me.custom(x=>e.jsxs(b.div,{variants:ba,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3,ease:"easeOut"},className:j("flex items-center justify-between w-full max-w-xs p-3 rounded-xl border shadow-md",fa[r]),children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(c,{className:j("h-4 w-4 mt-0.5 flex-shrink-0",pa[r])}),e.jsxs("div",{className:"space-y-0.5",children:[t&&e.jsx("h3",{className:j("text-xs font-medium leading-none",_e[r],o&&_e.success),children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s?.label&&e.jsx(D,{variant:s.variant||"outline",size:"sm",onClick:()=>{s.onClick(),me.dismiss(x)},className:j("cursor-pointer",r==="success"?"text-green-600 border-green-600 hover:bg-green-600/10 dark:hover:bg-green-400/20":r==="error"?"text-destructive border-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20":r==="warning"?"text-amber-600 border-amber-600 hover:bg-amber-600/10 dark:hover:bg-amber-400/20":"text-foreground border-border hover:bg-muted/10 dark:hover:bg-muted/20"),children:s.label}),e.jsx("button",{onClick:()=>{me.dismiss(x),d?.()},className:"rounded-full p-1 hover:bg-muted/50 dark:hover:bg-muted/30 transition-colors focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Dismiss notification",children:e.jsx(J,{className:"h-3 w-3 text-muted-foreground"})})]})]}),{duration:i,position:l})}O.success=(t,a={})=>O({message:t,variant:"success",...a});O.error=(t,a={})=>O({message:t,variant:"error",...a});O.warning=(t,a={})=>O({message:t,variant:"warning",...a});O.info=(t,a={})=>O({message:t,variant:"default",...a});function Y({children:t,isVisible:a,className:r=""}){const[i,l]=n.useState(a);return n.useEffect(()=>{if(a){l(!0);const s=setTimeout(()=>{},300);return()=>clearTimeout(s)}else{const s=setTimeout(()=>l(!1),300);return()=>clearTimeout(s)}},[a]),i?e.jsx("div",{className:`transition-all duration-300 ease-in-out ${r} ${a?"opacity-100 transform translate-x-0":"opacity-0 transform translate-x-full"}`,children:t}):null}function te({children:t,isVisible:a,className:r=""}){const[i,l]=n.useState(a);return n.useEffect(()=>{if(a){l(!0);const s=setTimeout(()=>{},300);return()=>clearTimeout(s)}else{const s=setTimeout(()=>l(!1),300);return()=>clearTimeout(s)}},[a]),i?e.jsx("div",{className:`transition-all duration-300 ease-in-out ${r} ${a?"opacity-100":"opacity-0"}`,children:t}):null}function wa({isOpen:t,email:a,displayName:r,isAuthenticating:i,onCancel:l}){return e.jsx(V,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:i?void 0:l}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:e.jsxs(b.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.5},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md p-8 pointer-events-auto relative",children:[!i&&e.jsx("button",{onClick:l,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(b.div,{animate:i?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:{},transition:{duration:2,repeat:1/0},className:"w-20 h-20 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:i?e.jsx(ye,{className:"w-10 h-10 text-white animate-spin"}):e.jsx(he,{className:"w-10 h-10 text-white"})}),i&&e.jsx(b.div,{animate:{scale:[1,1.5,1.5],opacity:[.5,0,0]},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute inset-0 rounded-full bg-indigo-500"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 dark:text-white mb-2",children:i?"Authenticating...":"Sign in to Sparcclen"}),e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:["Continue as ",e.jsx("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:r||a})]}),!i&&e.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx(ne,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-indigo-900 dark:text-indigo-200 font-medium mb-1",children:"Your Windows login already protects these credentials"}),e.jsx("p",{className:"text-[10px] text-indigo-700 dark:text-indigo-300 leading-tight",children:"via Windows Data Protection API (DPAPI)."})]})]})}),i&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:[e.jsx("p",{className:"text-sm",children:"Please verify your identity using Windows Hello"}),e.jsx("p",{className:"text-xs mt-1 text-gray-500 dark:text-gray-500",children:"Use your PIN, fingerprint, face recognition, or password"})]}),!i&&e.jsx("button",{onClick:l,className:"w-full py-3 px-4 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium transition-colors",children:"Cancel"})]})})]})})}async function va(){try{const t=new Uint8Array(32);if(typeof crypto<"u"&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let i=0;i<t.length;i++)t[i]=Math.floor(Math.random()*256);const a=btoa(String.fromCharCode(...Array.from(t))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),r=typeof window<"u"?window.location.hostname:"127.0.0.1";return await Qe({challenge:a,rpId:r,timeout:6e4,userVerification:"preferred"}),{success:!0}}catch(t){return t?.name==="NotAllowedError"?{success:!1,error:"Authentication cancelled"}:{success:!1,error:t?.message||"Offline authentication failed"}}}function ja(){return Xe()}function Na({onSuccess:t,onSignUp:a,onForgotPassword:r,isTransitioning:i=!1}){const[l,s]=n.useState(""),[d,o]=n.useState(""),[c,x]=n.useState(!1),[h,m]=n.useState(""),[u,y]=n.useState(null),[p,w]=n.useState(""),[E,S]=n.useState([]),[f,g]=n.useState(!1),[k,I]=n.useState(!1),[U,P]=n.useState(!1),[W,H]=n.useState(!1),[T,Z]=n.useState(typeof navigator<"u"?navigator.onLine:!0),ae=n.useRef(null);n.useEffect(()=>{let A=!0;Z(typeof navigator<"u"?navigator.onLine:!0);const N=()=>Z(navigator.onLine);return window.addEventListener("online",N),window.addEventListener("offline",N),(async()=>{try{const C=ja();A&&I(C);const _=await G();if(A&&g(!!_.loggedInBefore),A&&_?.lastEmail){y(_.lastEmail),l||s(_.lastEmail),_.displayName?w(_.displayName):w(_.lastEmail.split("@")[0]);const{data:v}=await M.auth.getUser(),L=v?.user?v.user.user_metadata||v.user.raw_user_meta_data||{}:{},R=L.display_name||L.full_name||L.name;R&&(w(R),await z({displayName:R,lastEmail:_.lastEmail}))}}catch{}})(),()=>{A=!1,window.removeEventListener("online",N),window.removeEventListener("offline",N)}},[]);const q=async()=>{P(!0),H(!0),x(!0),m("");try{await new Promise(C=>setTimeout(C,250));const A=await va();if(!A.success){const C=A.error||"Authentication cancelled";m(C),O.error(C);return}const N=p&&p.trim()||(u?u.split("@")[0]:"offline user");await z({loggedInBefore:!0,lastEmail:u||null,displayName:N,offlineSession:!0}),g(!0),t()}catch{const N="Windows Hello authentication failed. Please try again.";m(N),O.error(N)}finally{H(!1),x(!1),P(!1)}},K=()=>{W||(P(!1),x(!1))},X=async A=>{A.preventDefault(),x(!0),m("");try{const{hash:N}=await be(d),{error:C}=await M.auth.signInWithPassword({email:l,password:N});if(C)m(C.message),O.error(C.message);else{try{const{data:_}=await M.auth.getUser(),v=_?.user?_.user.user_metadata||_.user.raw_user_meta_data||{}:{},L=v.display_name||v.full_name||v.name||l.split("@")[0];w(L),await z({loggedInBefore:!0,lastEmail:l,displayName:L}),g(!0)}catch{try{await z({loggedInBefore:!0,lastEmail:l,displayName:p})}catch{}}t()}}catch{const C="An unexpected error occurred";m(C),O.error(C)}finally{x(!1)}};return e.jsxs("div",{className:`${T?"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl":"w-full h-full bg-transparent rounded-none shadow-none"}`,children:[e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:`${T?"w-1/2":"w-full"} p-10 md:p-12 flex flex-col`,children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[T&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Sparcclen"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Initiate the impossible"})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(Y,{isVisible:!i,children:e.jsxs("form",{onSubmit:X,className:"space-y-5",children:[!T&&e.jsxs("div",{className:`${T?"mb-4 p-6 rounded-2xl bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-2 border-indigo-200 dark:border-indigo-700 relative overflow-hidden":"mb-2 p-0 bg-transparent border-0 relative overflow-visible"}`,children:[T&&e.jsx("div",{className:"absolute inset-0 opacity-[0.03] dark:opacity-[0.05] pointer-events-none",children:e.jsx(he,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 text-indigo-600"})}),e.jsxs("div",{className:`relative ${T?"flex items-center justify-between":"flex flex-col items-center justify-center text-center gap-3"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-indigo-900 dark:text-indigo-200 mb-1",children:T?`Welcome back, ${p||u}!`:`Welcome, ${p&&p.trim()||u||"offline user"}!`}),e.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:k?"Sign in with Windows Hello (Offline)":"Windows Hello isn't available on this device. Enable a PIN/biometric in Windows Hello."})]}),!T&&!k?null:e.jsx("div",{className:`${T?"relative":"relative mt-2"}`,children:e.jsx("button",{type:"button",onClick:q,disabled:c,className:`${T?"ml-4":""} flex-shrink-0 w-14 h-14 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95`,title:"Continue with Windows Hello (Offline)",children:c?e.jsx(ye,{className:"w-6 h-6 text-white animate-spin"}):e.jsx(he,{className:"w-6 h-6 text-white"})})})]})]}),T&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"email",type:"email",value:l,onChange:A=>s(A.target.value),placeholder:"youremail@gmail.com",required:!0,list:"stored-emails",className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),E.length>0&&e.jsx("datalist",{id:"stored-emails",children:E.map(A=>e.jsx("option",{value:A},A))})]})]}),T&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"password",type:"password",ref:ae,value:d,onChange:A=>o(A.target.value),placeholder:"********",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),h&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center text-sm",children:[e.jsx(oe,{className:"w-4 h-4 mr-2 flex-shrink-0"}),h]}),T&&e.jsx("div",{className:"pt-4",children:e.jsx(D,{type:"submit",disabled:c,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:c?"Signing in...":"Log in"})}),T&&e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? "}),e.jsx("button",{type:"button",onClick:a,className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Sign Up!"})]})]})})}),e.jsx(te,{isVisible:!i&&T,children:e.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-full p-1",children:e.jsx(ee,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Need to change your password?"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Update your password securely anytime you need to."}),e.jsx("button",{onClick:r,className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Change Password"})]})]})})})]})}),T&&e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-800 dark:via-gray-900 dark:to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 dark:border-indigo-600 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 dark:border-purple-600 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 dark:border-pink-600 rounded-full"})]})]})]}),e.jsx(wa,{isOpen:U,email:u||"",displayName:p,isAuthenticating:W,onCancel:K})]})}const ka=({onSuccess:t,onBackToLogin:a,isTransitioning:r=!1})=>{const[i,l]=n.useState(""),[s,d]=n.useState(""),[o,c]=n.useState(""),[x,h]=n.useState(""),[m,u]=n.useState(!1),[y,p]=n.useState(""),[w,E]=n.useState(!1),S=n.useMemo(()=>{if(!o)return{score:0,label:"",color:""};let g=0;const k={length:o.length>=8,lowercase:/[a-z]/.test(o),uppercase:/[A-Z]/.test(o),numbers:/\d/.test(o),symbols:/[!@#$%^&*(),.?":{}|<>]/.test(o)};return g=Object.values(k).filter(Boolean).length,g<=1?{score:g,label:"Very Weak",color:"bg-red-500"}:g<=2?{score:g,label:"Weak",color:"bg-orange-500"}:g<=3?{score:g,label:"Fair",color:"bg-yellow-500"}:g<=4?{score:g,label:"Good",color:"bg-blue-500"}:{score:g,label:"Strong",color:"bg-green-500"}},[o]),f=async g=>{if(g.preventDefault(),u(!0),p(""),!o){p("Password is required"),u(!1);return}if(o!==x){u(!1);return}try{const{hash:k}=await be(o),{error:I}=await M.auth.signUp({email:s,password:k,options:{emailRedirectTo:`${window.location.origin}/auth/confirm`,data:{display_name:i||s.split("@")[0]}}});I?p(I.message):E(!0)}catch{p("An unexpected error occurred")}finally{u(!1)}};return e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-10 md:p-12 flex flex-col",children:e.jsx("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Sparcclen"})}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:e.jsxs(Y,{isVisible:!r,children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Account Created!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 max-w-xs",children:["We've sent a confirmation link to ",e.jsx("strong",{children:s}),". Please check your inbox and click the link to activate your account."]}),e.jsx(D,{onClick:a||t,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-md",children:"Back to Login"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Create a Sparcclen Account"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Initiate the impossible with Sparcclen's powerful platform"})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(Y,{isVisible:!r,children:e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"displayName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Display Name"}),e.jsx("div",{className:"relative",children:e.jsx($,{id:"displayName",type:"text",value:i,onChange:g=>l(g.target.value),placeholder:"Your name",className:"pl-4 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"email",type:"email",value:s,onChange:g=>d(g.target.value),placeholder:"youremail@gmail.com",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"password",type:"password",value:o,onChange:g=>c(g.target.value),placeholder:"Create a strong password",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[1,2,3,4,5].map(g=>e.jsx("div",{className:`h-1 w-1 rounded-full transition-all duration-300 ${g<=S.score?S.color:"bg-gray-300 dark:bg-gray-600"}`},g))})]}),o&&e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:`font-medium ${S.score<=2?"text-red-600":S.score<=3?"text-orange-600":S.score<=4?"text-yellow-600":"text-green-600"}`,children:S.label}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[o.length,"/8+ characters"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"repeatPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"repeatPassword",type:"password",value:x,onChange:g=>h(g.target.value),placeholder:"Confirm your password",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]}),x&&o!==x&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"Passwords do not match"}),x&&o===x&&o&&e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Passwords match"})]}),y&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center text-sm",children:[e.jsx(oe,{className:"w-4 h-4 mr-2 flex-shrink-0"}),y]}),e.jsx("div",{className:"pt-4",children:e.jsx(D,{type:"submit",disabled:m||o!==x||S.score<2,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:m?"Creating Account...":"Create Account"})}),e.jsxs("div",{className:"text-center text-sm pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Already have an account? "}),e.jsx("button",{type:"button",onClick:a,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium transition-colors",children:"Login"})]})]})})})]})})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-800 dark:via-gray-900 dark:to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 dark:border-indigo-600 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 dark:border-purple-600 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 dark:border-pink-600 rounded-full"})]})]})]})})};function Te({isOpen:t,onClose:a,email:r="mohamedhms3102@gmail.com",phone:i="+20 1025060508",whatsappUrl:l="https://wa.me/201025060508"}){return Ke.createPortal(e.jsx(V,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]",onClick:a}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-none pt-10",children:e.jsxs(b.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},transition:{type:"spring",duration:.4},className:"pointer-events-auto relative w-full max-w-md rounded-2xl bg-white dark:bg-gray-900 p-6 shadow-2xl",children:[e.jsx("button",{onClick:a,className:"absolute right-4 top-4 text-gray-400 transition-colors hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Close",children:e.jsx(J,{className:"h-5 w-5"})}),e.jsx("h2",{className:"mb-2 text-center text-2xl font-bold text-gray-900 dark:text-white",children:"Contact Support"}),e.jsx("p",{className:"mb-6 text-center text-sm text-gray-600 dark:text-gray-400",children:"Get in touch with our team through any of the channels below."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:`mailto:${r}`,className:"flex items-center gap-3 rounded-xl border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900/30",children:e.jsx(de,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("div",{className:"truncate text-xs text-gray-600 dark:text-gray-400",children:r})]})]}),e.jsxs("a",{href:l,target:"_blank",rel:"noreferrer noopener",className:"flex items-center gap-3 rounded-xl border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(ht,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"WhatsApp"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Open chat in WhatsApp"})]})]}),e.jsxs("a",{href:`tel:${i.replace(/[^+\d]/g,"")}`,className:"flex items-center gap-3 rounded-xl border border-gray-200 p-4 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/30",children:e.jsx(ft,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Phone"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:i})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:a,className:"w-full rounded-xl bg-gray-100 px-4 py-3 font-medium text-gray-700 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",children:"Close"})})]})})]})}),document.body)}function Sa({onBack:t,isTransitioning:a=!1}){const[r,i]=n.useState(""),[l,s]=n.useState(!1),[d,o]=n.useState(""),[c,x]=n.useState(!1),[h,m]=n.useState(!1),u=async y=>{y.preventDefault(),s(!0),o("");try{const{error:p}=await M.auth.resetPasswordForEmail(r,{redirectTo:`${window.location.origin}/auth/confirm?next=/update-password`});p?o(p.message):x(!0)}catch{o("An unexpected error occurred")}finally{s(!1)}};return c?e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Email Sent"})}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:e.jsxs(Y,{isVisible:!a,children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center",children:e.jsx(le,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Email Sent Successfully!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 max-w-xs",children:["We've sent password reset instructions to ",e.jsx("strong",{children:r}),". Please check your inbox and follow the link to reset your password."]}),e.jsx(D,{onClick:t,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4"}),"Back to Login"]})})]})}),e.jsx(te,{isVisible:!a,children:e.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-full p-1",children:e.jsx(ne,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Need help with your account?"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Our support team is here to help you with any account-related issues."}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Contact Support"})]})]})})}),e.jsx(Te,{isOpen:h,onClose:()=>m(!1)})]})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-800 dark:via-gray-900 dark:to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 dark:border-indigo-600 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 dark:border-purple-600 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 dark:border-pink-600 rounded-full"})]})]})]})}):e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsx("div",{className:"flex-1 flex flex-col justify-center",children:e.jsx(Y,{isVisible:!a,children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"email",type:"email",value:r,onChange:y=>i(y.target.value),placeholder:"youremail@gmail.com",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),d&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 p-3 rounded-lg flex items-center text-sm",children:[e.jsx("span",{className:"w-4 h-4 mr-2 flex-shrink-0",children:""}),d]}),e.jsx("div",{className:"pt-2",children:e.jsx(D,{type:"submit",disabled:l,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:l?"Sending...":"Send Reset Link"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:t,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:" Back to Login"})})]})})}),e.jsx(te,{isVisible:!a,children:e.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-full p-1",children:e.jsx(ne,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Need help with your account?"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Our support team is here to help you with any account-related issues."}),e.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Contact Support"})]})]})})}),e.jsx(Te,{isOpen:h,onClose:()=>m(!1)})]})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-800 dark:via-gray-900 dark:to-indigo-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 dark:border-indigo-600 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 dark:border-purple-600 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 dark:border-pink-600 rounded-full"})]})]})]})})}function Ca({onSuccess:t,isTransitioning:a=!1}){const[r,i]=n.useState(""),[l,s]=n.useState(!1),[d,o]=n.useState(""),c=async x=>{if(x.preventDefault(),s(!0),o(""),!r){o("Password is required"),s(!1);return}try{const{hash:h}=await be(r),{error:m}=await M.auth.updateUser({password:h});m?o(m.message):t()}catch{o("An unexpected error occurred")}finally{s(!1)}};return e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Update Password"})}),e.jsx("div",{className:"flex-1 flex flex-col justify-center",children:e.jsx(Y,{isVisible:!a,children:e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{id:"password",type:"password",value:r,onChange:x=>i(x.target.value),placeholder:"********",required:!0,className:"pl-10 pr-4 py-3 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-white bg-white dark:bg-gray-800 transition-colors"}),e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 p-3 rounded-lg flex items-center text-sm",children:[e.jsx(oe,{className:"w-4 h-4 mr-2 flex-shrink-0"}),d]}),e.jsx("div",{className:"pt-2",children:e.jsx(D,{type:"submit",disabled:l,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:l?"Updating...":"Update Password"})})]})})}),e.jsx(te,{isVisible:!a,children:e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-100 rounded-full p-1",children:e.jsx(ee,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Password Updated Successfully"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your password has been securely updated and encrypted."})]})]})})})]})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 rounded-full"})]})]})]})})}function Ea({isTransitioning:t=!1}){const[a,r]=n.useState("loading"),[i,l]=n.useState(""),[s,d]=n.useState("generic"),[o,c]=n.useState(0);return n.useEffect(()=>{(async()=>{const h=new URLSearchParams(window.location.search),m=new URLSearchParams(window.location.hash.substring(1)),u=h.get("error")||m.get("error"),y=h.get("error_code")||m.get("error_code"),p=h.get("error_description")||m.get("error_description");if(u){r("error"),y==="otp_expired"||u==="otp_expired"?(d("expired"),l("Your confirmation link has expired. Please request a new one.")):p?.toLowerCase().includes("already")||u==="already_confirmed"?(d("already_confirmed"),l("Your email is already confirmed! You can log in now.")):u==="access_denied"?(d("invalid"),l("This confirmation link is invalid or has already been used.")):(d("generic"),l(p?decodeURIComponent(p):"An error occurred during confirmation."));return}const w=h.get("token_hash")||m.get("token_hash"),E=h.get("type")||m.get("type"),S=h.get("next")||m.get("next")||"/";if(w&&E)try{const{error:f}=await M.auth.verifyOtp({type:E,token_hash:w});if(f)r("error"),f.message.toLowerCase().includes("expired")?(d("expired"),l("Your confirmation link has expired. Please request a new one.")):f.message.toLowerCase().includes("already")?(d("already_confirmed"),l("Your email is already confirmed! You can log in now.")):(d("generic"),l(f.message));else{r("success"),l("Email confirmed successfully!");const g=setInterval(()=>{c(k=>k>=100?(clearInterval(g),100):k+2)},40);setTimeout(()=>{window.location.href=S},2500)}}catch{r("error"),d("generic"),l("An unexpected error occurred")}else r("error"),d("invalid"),l("No confirmation token found in the URL.")})()},[]),e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Email Confirmation"})}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:e.jsxs(Y,{isVisible:!t,children:[e.jsxs("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${a==="loading"?"bg-blue-100 dark:bg-blue-900/30":a==="success"?"bg-green-100 dark:bg-green-900/30":s==="expired"?"bg-orange-100 dark:bg-orange-900/30":s==="already_confirmed"?"bg-blue-100 dark:bg-blue-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:[a==="loading"&&e.jsx(ye,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 animate-spin"}),a==="success"&&e.jsx(le,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),a==="error"&&s==="expired"&&e.jsx(yt,{className:"w-8 h-8 text-orange-600 dark:text-orange-400"}),a==="error"&&s==="already_confirmed"&&e.jsx(bt,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),a==="error"&&s==="invalid"&&e.jsx(fe,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),a==="error"&&s==="generic"&&e.jsx(De,{className:"w-8 h-8 text-red-600 dark:text-red-400"})]}),e.jsxs("h2",{className:`text-xl font-semibold ${a==="loading"?"text-gray-900 dark:text-white":a==="success"?"text-green-700 dark:text-green-400":s==="expired"?"text-orange-700 dark:text-orange-400":s==="already_confirmed"?"text-blue-700 dark:text-blue-400":"text-red-700 dark:text-red-400"}`,children:[a==="loading"&&"Confirming Your Email...",a==="success"&&"Email Confirmed!",a==="error"&&s==="expired"&&"Link Expired",a==="error"&&s==="already_confirmed"&&"Already Confirmed",a==="error"&&s==="invalid"&&"Invalid Link",a==="error"&&s==="generic"&&"Confirmation Failed"]}),e.jsxs("p",{className:`max-w-xs ${a==="loading"?"text-gray-600 dark:text-gray-400":a==="success"?"text-green-600 dark:text-green-400":s==="expired"?"text-orange-600 dark:text-orange-400":s==="already_confirmed"?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:[a==="loading"&&"Please wait while we verify your email address...",a==="success"&&i,a==="error"&&i]}),a==="success"&&e.jsxs("div",{className:"w-full max-w-xs space-y-3",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 p-3 rounded-lg text-sm",children:"Redirecting you to login..."}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-100 ease-linear",style:{width:`${o}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o<100?`${Math.round(o)}% complete`:"Complete!"})]}),a==="error"&&e.jsxs("div",{className:"w-full max-w-xs space-y-3",children:[s==="expired"&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 text-orange-700 dark:text-orange-400 p-3 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"What happened?"}),e.jsx("p",{className:"text-xs",children:"Confirmation links expire after 24 hours for security. Please sign up again to receive a new link."})]}),s==="already_confirmed"&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-400 p-3 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Good news!"}),e.jsx("p",{className:"text-xs",children:"Your account is ready to use. Just log in with your credentials."})]}),s==="invalid"&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 p-3 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Invalid or used link"}),e.jsx("p",{className:"text-xs",children:"This link may have already been used or is invalid. Try signing up again if needed."})]}),e.jsx("div",{className:"pt-2",children:e.jsx(D,{onClick:()=>window.location.href="/",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium transition-colors",children:s==="already_confirmed"?"Go to Login":"Back to Home"})})]})]})}),e.jsx(te,{isVisible:!t,children:e.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 rounded-full p-1 ${a==="success"?"bg-green-100 dark:bg-green-900/30":s==="expired"?"bg-orange-100 dark:bg-orange-900/30":s==="already_confirmed"?"bg-blue-100 dark:bg-blue-900/30":"bg-indigo-100 dark:bg-indigo-900/30"}`,children:e.jsxs("svg",{className:`w-4 h-4 ${a==="success"?"text-green-600 dark:text-green-400":s==="expired"?"text-orange-600 dark:text-orange-400":s==="already_confirmed"?"text-blue-600 dark:text-blue-400":"text-indigo-600 dark:text-indigo-400"}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("path",{d:"M12 17h.01"})]})}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a==="success"&&"Welcome aboard!",a==="error"&&s==="expired"&&"Need a new link?",a==="error"&&s==="already_confirmed"&&"Ready to start?",a==="error"&&(s==="invalid"||s==="generic")&&"Need help?",a==="loading"&&"Almost there..."]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a==="success"&&"Your account is now active. You can start using all features immediately.",a==="error"&&s==="expired"&&"Go back to the signup page to request a fresh confirmation link.",a==="error"&&s==="already_confirmed"&&"Your email is verified. Head to the login page to access your account.",a==="error"&&(s==="invalid"||s==="generic")&&"If you continue to experience issues, please contact our support team.",a==="loading"&&"Verifying your email address..."]}),a==="error"&&e.jsx("button",{onClick:()=>window.location.href="/",className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1 hover:text-indigo-800 dark:hover:text-indigo-300",children:s==="already_confirmed"?"Go to Login":"Contact Support"})]})]})})})]})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-pink-400 to-rose-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-indigo-300 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-purple-300 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-pink-300 rounded-full"})]})]})]})})}function _a({error:t,onRetry:a,isTransitioning:r=!1}){return e.jsx("div",{className:"w-[900px] h-[750px] bg-white dark:bg-gray-900 rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"w-1/2 p-12 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-lg mx-auto w-full h-full flex flex-col",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Authentication Error"})}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:e.jsxs(Y,{isVisible:!r,children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-red-700 dark:text-red-400",children:"Something went wrong"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 max-w-xs",children:t?`Error: ${t}`:"An unspecified error occurred during authentication."}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 p-3 rounded-lg text-sm",children:"Please try again or contact support if the problem persists."}),e.jsxs("div",{className:"flex gap-3 w-full pt-2",children:[a&&e.jsx(D,{onClick:a,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium transition-colors",children:"Try Again"}),e.jsx(D,{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-medium transition-colors",children:"Back to Home"})]})]})}),e.jsx(te,{isVisible:!r,children:e.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 bg-red-100 dark:bg-red-900/30 rounded-full p-1",children:e.jsx(Fe,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Need help?"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"If you continue to experience issues, please contact our support team."}),e.jsx("button",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Contact Support"})]})]})})})]})}),e.jsxs("div",{className:"w-1/2 bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 dark:from-gray-800 dark:via-red-900/30 dark:to-orange-900/30 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"w-80 h-80 relative",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl transform rotate-12 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(239, 68, 68, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-orange-400 to-red-500 rounded-full opacity-80 shadow-lg transform rotate-45"}),e.jsx("div",{className:"absolute -bottom-6 -left-6 w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full opacity-70 shadow-lg transform -rotate-12"}),e.jsx("div",{className:"absolute top-1/2 -left-8 w-8 h-8 bg-gradient-to-br from-red-400 to-pink-500 rounded-full opacity-60 shadow-lg transform rotate-45"})]})}),e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 border border-red-300 dark:border-red-600 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 border border-orange-300 dark:border-orange-600 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 border border-yellow-300 dark:border-yellow-600 rounded-full"})]})]})]})})}const Ie=[["Normally I only let Officially SignedIn Legends pass...","But today you're luckyI'm in a generous mood ","Mwahahaha... still evil, just politely evil ","Say 'thanks' and go have fun (before the WiFi notices)."],["Offline VIP lane unlocked.","You didn't see me open it ","Chaos... but tasteful chaos.","Go have fun before the router tattles."],["Welcome to the Secret Offline Club.","Membership requirement: vibes only.","Still the villaintoday with customer service.","Whisper 'thanks' and proceed like a ninja."]];function Ta({onDone:t}){const[a,r]=n.useState(0),[i]=n.useState(()=>{const l=Math.floor(Math.random()*Ie.length);return Ie[l]});return n.useEffect(()=>{if(a>=i.length){const s=setTimeout(t,400);return()=>clearTimeout(s)}const l=setTimeout(()=>r(s=>s+1),1700);return()=>clearTimeout(l)},[a,t]),e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsx("div",{className:"h-full flex flex-col relative",children:e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:e.jsx("div",{className:"w-full max-w-none px-8 text-center",children:e.jsx(V,{mode:"wait",children:a<i.length&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},className:"w-full whitespace-nowrap text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white",children:i[a]},a)})})})})})}function Ia(){const{user:t,loading:a}=ce(),{isFirstTime:r,markFirstTimeComplete:i,setTheme:l}=se(),[s,d]=n.useState(!0),[o,c]=n.useState(!1),[x,h]=n.useState(()=>{const N=new URLSearchParams(window.location.search),C=new URLSearchParams(window.location.hash.substring(1));return(N.get("token_hash")||C.get("token_hash"))&&(N.get("type")||C.get("type"))?"auth-confirm":N.get("error")||C.get("error")?"auth-error":"login"}),[m,u]=n.useState(!1),[y,p]=n.useState(!1),[w,E]=n.useState(!1),[S,f]=n.useState(!1),[g,k]=n.useState(typeof navigator<"u"?navigator.onLine:!0),[I,U]=n.useState(!1),[P,W]=n.useState(!1),[H,T]=n.useState(!1),Z=N=>{l(N)},ae=()=>{i(),c(!1)};if(n.useEffect(()=>{const N=setTimeout(()=>{d(!1),r&&c(!0)},2e3);return()=>clearTimeout(N)},[r]),n.useEffect(()=>{const N=()=>k(navigator.onLine);window.addEventListener("online",N),window.addEventListener("offline",N),k(navigator.onLine),(async()=>{try{const _=await G();U(!!_.offlineSession)}catch{}})();const C=_=>{try{const v=_?.detail;typeof v?.offlineSession=="boolean"&&U(!!v.offlineSession)}catch{}};return window.addEventListener("save:updated",C),()=>{window.removeEventListener("online",N),window.removeEventListener("offline",N),window.removeEventListener("save:updated",C)}},[]),n.useEffect(()=>{const N=I&&!g;if((t||N)&&!s){if(N&&P&&!H){f(!1);return}if(w){const C=setTimeout(()=>{f(!0)},600);return()=>clearTimeout(C)}f(!0)}else!t&&!N&&(E(!1),f(!1),W(!1),T(!1))},[w,t,s,I,g,P,H]),n.useEffect(()=>{const N=C=>{const _=window.screen.width,v=window.screen.height;u(C.width>=_-50&&C.height>=v-50)};if(window.api?.onWindowResize&&window.api?.getWindowSize){const C=window.api.onWindowResize(N);return window.api.getWindowSize().then(_=>{N(_)}).catch(_=>{console.warn("Failed to get window size:",_),u(!1)}),()=>{C()}}else u(!1)},[]),s)return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-gray-50 dark:bg-gray-950 flex items-center justify-between px-4 select-none flex-shrink-0 transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:e.jsx(Ee,{onLoaded:()=>{},brandName:"Sparcclen",tagline:"Initiate the impossible"})})]})});if(o)return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-white dark:bg-gray-950 flex items-center justify-between px-4 select-none flex-shrink-0 relative z-[60] transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:"flex-1 overflow-hidden bg-gray-50 dark:bg-gray-950",children:e.jsx(Lt,{onThemeSelect:Z,onConfirm:ae,isVisible:!0})})]})});if(a&&!s)return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-gray-50 dark:bg-gray-950 flex items-center justify-between px-4 select-none flex-shrink-0 transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:e.jsx(Ee,{onLoaded:()=>{},brandName:"Sparcclen",tagline:"Initiate the impossible"})})]})});if(I&&!g&&P&&!H&&!s)return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-gray-50 dark:bg-gray-950 flex items-center justify-between px-4 select-none flex-shrink-0 transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:"flex-1",children:e.jsx(Ta,{onDone:()=>T(!0)})})]})});if((t||I&&!g)&&!s)return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-gray-900 dark:bg-gray-800 flex items-center justify-between px-4 select-none flex-shrink-0 transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:`flex-1 overflow-hidden bg-gray-900 dark:bg-gray-800 ${S?"animate-fade-in-up":"opacity-0"}`,children:e.jsx(ha,{})})]})});const q=()=>{E(!0),g||(W(!0),T(!1))},K=()=>{p(!0),setTimeout(()=>{h("login"),setTimeout(()=>p(!1),50)},200)},X=N=>{p(!0),setTimeout(()=>{h(N),setTimeout(()=>p(!1),50)},200)},A=()=>{switch(x){case"login":return e.jsx(Na,{onSuccess:q,onSignUp:()=>X("signup"),onForgotPassword:()=>X("forgot-password"),isTransitioning:y});case"signup":return e.jsx(ka,{onSuccess:K,onBackToLogin:K,isTransitioning:y});case"forgot-password":return e.jsx(Sa,{onBack:K,isTransitioning:y});case"update-password":return e.jsx(Ca,{onSuccess:q,isTransitioning:y});case"auth-confirm":return e.jsx(Ea,{isTransitioning:y});case"auth-error":const N=new URLSearchParams(window.location.search),C=new URLSearchParams(window.location.hash.substring(1));return e.jsx(_a,{error:N.get("error")||C.get("error")||void 0,isTransitioning:y});default:return null}};return e.jsx("div",{className:"h-screen w-screen overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"h-10 bg-gray-50 dark:bg-gray-950 flex items-center justify-between px-4 select-none flex-shrink-0 transition-colors duration-300",style:{WebkitAppRegion:"drag"},children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white transition-colors duration-300",children:"Sparcclen"})}),e.jsx(Q,{className:"flex-shrink-0",isMaximized:m,onMaximizeToggle:()=>u(!m)})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto bg-gray-50 dark:bg-gray-950 transition-colors duration-300",children:e.jsx("div",{className:`${s?"opacity-0":w?"animate-slide-down":"animate-swipe-in"}`,children:A()})})]})})}function Aa(){return e.jsxs(Nt,{children:[e.jsx(et,{position:"bottom-right",toastOptions:{unstyled:!0,className:"flex justify-end"}}),e.jsx(ea,{children:e.jsx(Ia,{})})]})}Ye.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Aa,{})}));
